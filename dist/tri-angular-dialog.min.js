/*!
 * triAngular Dialog
 */
!function(a){"use strict";var b=document.body,c=document.documentElement,d=function(){return b.scrollTop||c.scrollTop},e=function(a){return a.isW3C?function(){return{width:window.innerWidth,height:window.innerHeight}}:a.isIE?function(){return{width:c.clientWidth,height:c.clientHeight}}:function(){return{width:b.clientWidth,height:b.clientHeight}}}({isW3C:"undefined"!=typeof window.innerWidth,isIE:"undefined"!=typeof c&&"undefined"!=typeof c.clientWidth&&0!=c.clientWidth}),f=function(a){var b=null!=a?parseInt(a,10):20;return isNaN(b)?d()+"px":d()+e().height*(b/100)+"px"};a.directive("dialog",["$rootScope","$timeout","$animate","dialogManager",function(a,b,c,d){var e=function(b,e,g){var h=d.dialogs[g.dialog];b.data=b.data||{},angular.extend(b.data,h.data),h.hasOwnProperty("dynamicParams")&&angular.extend(b,{params:h.dynamicParams});var i={zIndex:d.cfg.baseZindex+2*(h.label+1),top:f(h.topOffset)};e.css(i),b.closeClick=function(){a.$emit(h.namespace+".dialog.close",h)},a.$on(h.namespace+".dialog.close",function(a,d){d.label==h.label&&(b.$destroy(),c.leave(e))})};return{restrict:"A",require:"?ngController",link:e,scope:!0}}]),a.directive("dialogRoot",["$compile","$location","$rootScope","$interpolate","$document","$animate","dialogManager",function(a,b,c,d,e,f,g){var h={getElem:function(a){return angular.element(d('<section dialog="{{ label }}"'+(a.controller?' ng-controller="{{ controller }} as ctrl"':"")+"><div ng-include=\"'{{ templateUrl  }}'\" /></section>")(a)).addClass(g.cfg.dialogClass).addClass(a.dialogClass).addClass(g.cfg.showClass)},updateMask:function(a,b){var c={css:{"true":g.cfg.baseZindex+2*g.dialogs.length-1,"false":-1},cls:{"true":g.cfg.showClass,"false":g.cfg.hideClass}},d=function(b){a.css("z-index",c.css[b]),a.removeClass(c.cls[!b]).addClass(c.cls[b])};d(g.hasAny(b))},eventLabel:function(a,b){return a+".dialog."+b},emit:function(a,b){var d=this;return{forThe:function(e,f,h){var i={"true":!e.modal,"false":!0,close:!!g.dialogs.length,open:!0};e&&i[a]&&i[!!h]&&(angular.isFunction(b)&&b(),c.$emit(d.eventLabel(f,a),e))}}},maskBasicClass:function(a,b){return a?a+"-"+b:b}},i=function(b,d){var i=angular.element("<div />"),j=d.dialogRoot||"main";return b.append(i),i.addClass(h.maskBasicClass(d.dialogRoot,g.cfg.maskClass)),i.bind("click",function(){h.emit("close").forThe(g.getUpperDialog(),j,!0)}),function(b,d,k){var l=k.dialogRoot?k.dialogRoot+"-"+g.cfg.rootClass:g.cfg.rootClass,m=function(e,g){d.addClass(l),f.enter(a(h.getElem(g))(b),d,i),!c.$$phase&&c.$digest(),h.updateMask(i,j)},n=function(a,b){g.unregisterDialog(b.label),!g.hasAny(j)&&d.removeClass(l),h.updateMask(i,j)};c.$on(h.eventLabel(j,"open"),m),c.$on(h.eventLabel(j,"close"),n),e.bind("keydown keypress",function(a){var b=g.getUpperDialog();27===a.which&&b&&b.namespace===j&&h.emit("close").forThe(b,j)})}};return{restrict:"A",compile:i}}]),a.provider("dialogManager",function(){var a={baseZindex:3e3,rootClass:"dialog-root",maskClass:"dialog-mask",dialogClass:"dialog",showClass:"show",hideClass:"hide"},b=function(a){return{controller:a.controller||!1,dialogClass:a.dialogClass||"",topOffset:a.topOffset,modal:a.modal||!1,namespace:a.namespace||"main",templateUrl:a.templateUrl}},c=function(a){if(!a.templateUrl)throw new Error('dialog.DialogData() - initialData must contain defined "templateUrl"');var c=b(a);a.dynamicParams&&(c.dynamicParams=a.dynamicParams),a.scope&&(c.scope=a.scope),Object.keys(c).forEach(function(b){delete a[b]}),angular.extend(this,c),this.data=a};return{DialogData:c,config:function(b){return angular.extend(a,b),this},$get:["$rootScope",function(b){var d=function(){return angular.extend(this,{dialogs:[],cfg:a})};return angular.extend(d.prototype,{hasAny:function(a){return this.dialogs.filter(function(b){return b.namespace===a}).length>0},getUpperDialog:function(){var a=this.dialogs.length;return a>0&&this.dialogs[a-1]},registerDialog:function(a){return a.label=this.dialogs.push(a)-1,a},unregisterDialog:function(a){var b=this.dialogs[a];return b&&b.label===a?(delete b.label,this.dialogs.splice(a,1),!0):!1},triggerDialog:function(a){return a=a||{},b.$emit((a.namespace?a.namespace+".":"main.")+"dialog.open",this.registerDialog(new c(a))),this}}),new d}]}})}(angular.module("triNgDialog",["ng","ngAnimate"]));
//# sourceMappingURL=tri-angular-dialog.min.js.map