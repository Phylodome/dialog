/*!
 * triAngular Dialog
 */
!function(a){"use strict";a.directive("dialog",["$rootScope","$animate","dialogManager",function(a,b,c){var d=function(d,e,f){var g=c.dialogs[f.dialog];d.data=d.data||{},angular.extend(d.data,g.data),g.hasOwnProperty("dynamicParams")&&angular.extend(d,{params:g.dynamicParams}),angular.isObject(g.scope)&&angular.extend(d,g.scope),d.closeClick=function(){a.$emit(g.namespace+".dialog.close",g)},a.$on(g.namespace+".dialog.close",function(a,c){c.label==g.label&&(d.$destroy(),b.leave(e))})};return{restrict:"A",require:"?ngController",link:d,scope:!0}}]),a.directive("dialogRoot",["$compile","$location","$rootScope","$interpolate","$document","$animate","dialogManager",function(a,b,c,d,e,f,g){var h=document.body,i=document.documentElement,j={getViewportSize:function(a){return a.isW3C?function(){return{width:window.innerWidth,height:window.innerHeight}}:a.isIE?function(){return{width:i.clientWidth,height:i.clientHeight}}:function(){return{width:h.clientWidth,height:h.clientHeight}}}({isW3C:"undefined"!=typeof window.innerWidth,isIE:"undefined"!=typeof i&&"undefined"!=typeof i.clientWidth&&0!=i.clientWidth}),getTopScroll:function(){return h.scrollTop||i.scrollTop},getTopOffset:function(a){var b=null!=a?parseInt(a,10):20;return isNaN(b)?this.getTopScroll()+"px":this.getTopScroll()+this.getViewportSize().height*(b/100)+"px"},getElem:function(a){return angular.element(d('<section dialog="{{ label }}"'+(a.controller?' ng-controller="{{ controller }} as ctrl"':"")+"><div ng-include=\"'{{ templateUrl  }}'\" /></section>")(a)).addClass(g.cfg.dialogClass+" "+a.dialogClass).css({zIndex:g.cfg.baseZindex+2*(a.label+1),top:this.getTopOffset(a.topOffset)})},updateMask:function(a,b){g.hasAny(b)?(a.css("z-index",g.cfg.baseZindex+2*g.dialogs.length-1),f.addClass(a,g.cfg.showClass)):f.removeClass(a,g.cfg.showClass,function(){a.removeAttr("style")})},eventLabel:function(a,b){return a+".dialog."+b},extendClass:function(a,b){return a?a+"-"+b:b}},k=function(b,d){var e=angular.element("<div />"),h=d.dialogRoot||g.cfg.mainNamespace;return b.append(e),e.addClass(j.extendClass(d.dialogRoot,g.cfg.maskClass)),e.bind("click",function(){var a=g.getUpperDialog();a.modal||(c.$emit(j.eventLabel(h,"close"),a),c.$digest())}),function(b,d,i){var k=j.extendClass(i.dialogRoot,g.cfg.rootClass),l=function(g,i){d.addClass(k),f.enter(a(j.getElem(i))(b),d,e),!c.$$phase&&c.$digest(),j.updateMask(e,h)},m=function(a,b){g.unregisterDialog(b.label),!g.hasAny(h)&&d.removeClass(k),j.updateMask(e,h)};c.$on(j.eventLabel(h,"open"),l),c.$on(j.eventLabel(h,"close"),m)}};return{restrict:"A",compile:k}}]),a.directive("body",["$rootScope","$document","dialogManager",function(a,b,c){var d=function(){b.on("keydown keypress",function(b){var d=c.getUpperDialog();27===b.which&&d&&(a.$emit((d.namespace||c.cfg.mainNamespace)+".dialog.close",d),a.$digest())})};return{restrict:"E",link:d}}]),a.provider("dialogManager",function(){var a={baseZindex:3e3,rootClass:"dialog-root",maskClass:"dialog-mask",dialogClass:"dialog",mainNamespace:"main",showClass:"show",hideClass:"hide"},b=function(b){return{controller:b.controller||!1,dialogClass:b.dialogClass||"",topOffset:b.topOffset,modal:b.modal||!1,namespace:b.namespace||a.mainNamespace,templateUrl:b.templateUrl}},c=function(a){if(!a.templateUrl)throw new Error('dialog.DialogData() - initialData must contain defined "templateUrl"');var c=b(a);a.dynamicParams&&(c.dynamicParams=a.dynamicParams),a.scope&&(c.scope=a.scope),Object.keys(c).forEach(function(b){delete a[b]}),angular.extend(this,c),this.data=a};return{DialogData:c,config:function(b){return angular.extend(a,b),this},$get:["$rootScope",function(b){var d=function(){return angular.extend(this,{dialogs:[],cfg:a})};return angular.extend(d.prototype,{hasAny:function(a){return this.dialogs.filter(function(b){return b.namespace===a}).length>0},getUpperDialog:function(){var a=this.dialogs.length;return a>0&&this.dialogs[a-1]},registerDialog:function(a){return a.label=this.dialogs.push(a)-1,a},unregisterDialog:function(a){var b=this.dialogs[a];return b&&b.label===a?(this.dialogs.splice(a,1),!0):!1},triggerDialog:function(a){return a=a||{},b.$emit((a.namespace||this.cfg.mainNamespace)+".dialog.open",this.registerDialog(new c(a))),this}}),new d}]}})}(angular.module("triNgDialog",["ng","ngAnimate"]));
//# sourceMappingURL=tri-angular-dialog.min.js.map