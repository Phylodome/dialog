/*!
 * triAngular Dialog
 */
!function(a){"use strict";a.directive("dialog",["$rootScope","$http","$animate","$compile","$controller","$templateCache","dialogManager",function(a,b,c,d,e,f,g){var h=function(h,i,j){var k=g.dialogs[j.dialog],l={$data:k.data,$scope:h},m=function(a){k.controller&&(h.dialogCtrl=e(k.controller,l),i.data("$ngControllerController",h.dialogCtrl),i.children().data("$ngControllerController",h.dialogCtrl)),a(h)};b.get(k.templateUrl,{cache:f}).success(function(a){i.html(a),m(d(i.contents())),h.$emit("$triNgDialogTemplateLoaded")}).error(function(){h.$emit("$triNgDialogTemplateError")}),h.$emit("$triNgDialogTemplateRequested"),h.closeClick=function(){a.$emit(k.namespace+".dialog.close",k)},a.$on(k.namespace+".dialog.close",function(a,b){b.label==k.label&&(h.$destroy(),c.leave(i))})};return{restrict:"A",link:h,scope:!0}}]),a.directive("dialogRoot",["$compile","$location","$rootScope","$interpolate","$document","$animate","dialogManager",function(a,b,c,d,e,f,g){var h=document.body,i=document.documentElement,j={getViewportSize:function(a){return a.isW3C?function(){return{width:window.innerWidth,height:window.innerHeight}}:a.isIE?function(){return{width:i.clientWidth,height:i.clientHeight}}:function(){return{width:h.clientWidth,height:h.clientHeight}}}({isW3C:"undefined"!=typeof window.innerWidth,isIE:"undefined"!=typeof i&&"undefined"!=typeof i.clientWidth&&0!=i.clientWidth}),getTopScroll:function(){return h.scrollTop||i.scrollTop},getTopOffset:function(a){var b=null!=a?parseInt(a,10):20;return isNaN(b)?this.getTopScroll()+"px":this.getTopScroll()+this.getViewportSize().height*(b/100)+"px"},getElem:function(a){return angular.element(d('<section dialog="{{ label }}"></section>')(a)).addClass(g.cfg.dialogClass+" "+a.dialogClass).css({zIndex:g.cfg.baseZindex+2*(a.label+1),top:this.getTopOffset(a.topOffset)})},updateMask:function(a,b){g.hasAny(b)?(a.css("z-index",g.cfg.baseZindex+2*g.dialogs.length-1),f.addClass(a,g.cfg.showClass)):f.removeClass(a,g.cfg.showClass,function(){a.removeAttr("style")})},eventLabel:function(a,b){return a+".dialog."+b},extendClass:function(a,b){return a?a+"-"+b:b}},k=function(b,d){var e=angular.element("<div />"),h=d.dialogRoot||g.cfg.mainNamespace;return b.append(e),e.addClass(j.extendClass(d.dialogRoot,g.cfg.maskClass)),e.bind("click",function(){var a=g.getUpperDialog();a.modal||(c.$emit(j.eventLabel(h,"close"),a),c.$digest())}),function(b,d,i){var k=j.extendClass(i.dialogRoot,g.cfg.rootClass),l=function(g,i){d.addClass(k),f.enter(a(j.getElem(i))(b),d,e),!c.$$phase&&c.$digest(),j.updateMask(e,h)},m=function(a,b){g.unRegisterDialog(b.label),!g.hasAny(h)&&d.removeClass(k),j.updateMask(e,h)};c.$on(j.eventLabel(h,"open"),l),c.$on(j.eventLabel(h,"close"),m)}};return{restrict:"A",compile:k}}]),a.directive("body",["$rootScope","$document","dialogManager",function(a,b,c){var d=function(){b.on("keydown keypress",function(b){var d=c.getUpperDialog();27===b.which&&d&&(a.$emit((d.namespace||c.cfg.mainNamespace)+".dialog.close",d),a.$digest())})};return{restrict:"E",link:d}}]),a.provider("dialogManager",function(){var a={baseZindex:3e3,rootClass:"dialog-root",maskClass:"dialog-mask",dialogClass:"dialog",mainNamespace:"main",showClass:"show",hideClass:"hide"},b=function(b,c){var d=function(){return angular.extend(this,{dialogs:[],cfg:a})},e=function(a,b){return a.templateUrl||c.error(new Error('triNgDialog.DialogData() - initialData must contain defined "templateUrl"')),this._updateDialogConfigData(a,b)};return angular.extend(e.prototype,{_updateDialogConfigData:function(b,c){return angular.extend(this,{controller:b.controller,controllerAs:b.controllerAs,dialogClass:b.dialogClass||"",topOffset:b.topOffset,modal:b.modal||!1,namespace:b.namespace||a.mainNamespace,templateUrl:b.templateUrl,data:c})}}),angular.extend(d.prototype,{hasAny:function(a){return this.dialogs.some(function(b){return b.namespace===a})},getUpperDialog:function(){var a=this.dialogs.length;return a>0&&this.dialogs[a-1]},registerDialog:function(a){return a.label=this.dialogs.push(a)-1,a},unRegisterDialog:function(a){var b=this.dialogs[a];return b&&b.label===a?(this.dialogs.splice(a,1),!0):!1},triggerDialog:function(a,c){return a=a||{},b.$emit((a.namespace||this.cfg.mainNamespace)+".dialog.open",this.registerDialog(new e(a,c))),this}}),new d};return{config:function(b){return angular.extend(a,b),this},$get:["$rootScope","$log",b]}})}(angular.module("triNgDialog",["ng","ngAnimate"]));
//# sourceMappingURL=tri-angular-dialog.min.js.map